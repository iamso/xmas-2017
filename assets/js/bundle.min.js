/*!
 * xmas-2017
 *
 * Made with ‚ù§ by Steve Ottoz <so@dev.so>
 *
 * Copyright (c) 2017 Steve Ottoz
 */
"use strict";var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var defaults={chars:"abcdefghijklmnopqrstuvwxyz0123456789",speed:75},Letter=function(){function a(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,a),this.el=b,this.original=b.textContent,this.options=Object.assign({},defaults,c)}return _createClass(a,[{key:"start",value:function(){var a=this;return this.stop(),this.random(),this.el.classList.add("scrambling"),this.interval=setInterval(function(){"function"==typeof a.next?a.next():a.random()},this.options.speed),this}},{key:"stop",value:function(){return clearInterval(this.interval),delete this.interval,this.el.classList.remove("scrambling"),this}},{key:"reveal",value:function(){var a=this,b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return new Promise(function(c){a.interval||a.start(),setTimeout(function(){b?a.next=function(){a.stop(),a.value=a.original,delete a.next,c()}:(a.stop(),a.value=a.original,c())},b)})}},{key:"scramble",value:function(){var a=this,b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return new Promise(function(c){a.interval||a.start(),setTimeout(function(){a.stop(),c()},b)})}},{key:"random",value:function(){for(var a="",b=0;b<this.original.length;b++)a+=this.options.chars.charAt(Math.floor(Math.random()*this.options.chars.length));return this.value=a}},{key:"value",get:function(){return this.el.textContent},set:function(a){this.el.textContent=a}}]),a}(),letterGrid=document.querySelector(".letter-grid"),letters=[].slice.call(document.querySelectorAll(".letter"),0),startButton=document.querySelector(".start-button"),p=Promise.resolve(),letterElements=[];for(var i in letters){var l=new Letter(letters[i]);l.scramble(),letterElements.push(l)}startButton.addEventListener("click",start),sleep(500).then(function(){document.documentElement.classList.add("loaded")});function start(){startButton.classList.add("hide"),letterGrid.classList.remove("hide");var a=function(a){var b=letterElements[a];p=p.then(function(){return b.reveal(random(200,400))}),p=p.then(function(){return b.el.classList.add("done"),Promise.resolve()}),a>=letterElements.length-1&&(p=p.then(function(){return sleep(1e3)}),p=p.then(function(){document.documentElement.classList.add("done")}))};for(var b in letterElements)a(b)}function sleep(a){return new Promise(function(b){setTimeout(b,a)})}function random(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:0,b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1;return Math.floor(Math.random()*(b-a+1)+a)}var c=console;c&&c.log("\n      *\n     .#.\n    .###.\n   .#%##%.\n  .%##%###.\n .##%###%##.\n.merry  xmas.\n     and\n    happy\n    2018!\n  ");